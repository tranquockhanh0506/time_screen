<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.app_limiter_example"   xmlns:tools="http://schemas.android.com/tools">

 <uses-permission android:name="android.permission.PACKAGE_USAGE_STATS" />
    <!-- Required for starting a foreground service with type="dataSync" on newer Android SDKs -->
    <!-- Ensure this permission is present in the final merged manifest -->
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC" tools:node="merge" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>
    <uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM" />
    <uses-permission android:name="android.permission.USE_EXACT_ALARM" />
    <uses-permission android:name="android.permission.QUERY_ALL_PACKAGES" />
     <application
         android:label="app_limiter_example"
         android:name="${applicationName}"
         android:icon="@mipmap/ic_launcher">
         <activity
             android:name=".MainActivity"
             android:exported="true"
             android:launchMode="singleTop"
             android:taskAffinity=""
             android:theme="@style/LaunchTheme"
             android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
             android:hardwareAccelerated="true"
             android:windowSoftInputMode="adjustResize">
             <!-- Specifies an Android theme to apply to this Activity as soon as
                  the Android process has started. This theme is visible to the user
                  while the Flutter UI initializes. After that, this theme continues
                  to determine the Window background behind the Flutter UI. -->
             <meta-data
               android:name="io.flutter.embedding.android.NormalTheme"
               android:resource="@style/NormalTheme"
               />
             <intent-filter>
                 <action android:name="android.intent.action.MAIN"/>
                 <category android:name="android.intent.category.LAUNCHER"/>
             </intent-filter>
         </activity>
         <!-- Don't delete the meta-data below.
              This is used by the Flutter tool to generate GeneratedPluginRegistrant.java -->
             <!-- Service implemented in the plugin library; use fully-qualified name and declare FGS type -->
             <service
                 android:name="com.example.app_limiter.BlockAppService"
                 android:exported="false"
                 android:foregroundServiceType="dataSync"
                 tools:node="merge"
                 tools:replace="android:foregroundServiceType" />

        <!-- Receiver for alarms (plugin implementation) -->
        <receiver
            android:name="com.example.app_limiter.AlarmReceiver"
            android:exported="false"
            tools:node="merge" />

        <!-- Override library BootReceiver exported flag (required for Android 12+)
             The library declares the receiver with an intent-filter; the app must
             explicitly set android:exported for components with intent-filters. -->
        <receiver
            android:name="com.example.app_limiter.BootReceiver"
            android:exported="true"
            tools:node="merge"
            tools:replace="android:exported" />
         <meta-data
             android:name="flutterEmbedding"
             android:value="2" />
     </application>
    <!-- Required to query activities that can process text, see:
         https://developer.android.com/training/package-visibility and
         https://developer.android.com/reference/android/content/Intent#ACTION_PROCESS_TEXT.

         In particular, this is used by the Flutter engine in io.flutter.plugin.text.ProcessTextPlugin. -->
    <queries>
        <intent>
            <action android:name="android.intent.action.PROCESS_TEXT"/>
            <data android:mimeType="text/plain"/>
        </intent>
    </queries>
</manifest>
